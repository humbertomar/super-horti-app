{"version":3,"sources":["../../src/pages/meus-enderecos/meus-enderecos.module.ts","../../src/pages/meus-enderecos/meus-enderecos.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MeusEnderecosPage } from './meus-enderecos';\n\n@NgModule({\n  declarations: [\n    MeusEnderecosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MeusEnderecosPage),\n  ],\n})\nexport class MeusEnderecosPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meus-enderecos/meus-enderecos.module.ts","import { Component } from \"@angular/core\";\nimport { IonicPage, NavController, ToastController, AlertController, LoadingController, Platform, Events, ModalController } from \"ionic-angular\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport { AngularFireDatabase } from \"@angular/fire/database\";\nimport { map } from \"rxjs/operators\";\n\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\n\nimport { AddEnderecoPage } from \"../add-endereco/add-endereco\";\nimport { GoogleMapsGeolocalizacaoPage } from \"../google-maps-geolocalizacao/google-maps-geolocalizacao\";\n\n@IonicPage()\n@Component({\n  selector: 'page-meus-enderecos',\n  templateUrl: 'meus-enderecos.html',\n})\nexport class MeusEnderecosPage {\n\n  Cart: any = [];\n  noOfItems: any;\n\n  url: any;\n\n  addressList: any = [];\n\n  address: any = {};\n\n  dataSetGoogleMaps: any;\n\n  cep: any;\n  frete: any;\n\n  keyAtual: any;\n\n  constructor(\n    public af: AngularFireAuth,\n    public db: AngularFireDatabase,\n    public toastCtrl: ToastController,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    public platform: Platform,\n    public events: Events,\n\n    public modalCtrl: ModalController,\n\n    public authService: AuthServiceProvider,\n\n    public alertCtrl: AlertController\n  ) {\n    \n  }\n\n  ngOnInit() {\n    this.url = \"assets/img/profile.jpg\";\n  }\n\n  ionViewDidLoad() {\n\n    /*setTimeout(() => {\n      console.log('Async operation has ended');\n      this.Cart.complete();\n    }, 2000);*/\n\n    this.Cart = JSON.parse(localStorage.getItem(\"Cart\"));\n    //console.log(this.Cart);\n\n    if (this.Cart != null) {\n      var i;\n      var soma = 0;\n      var valor = [];\n      for (i = 0; i < this.Cart.length; i++) {\n        //console.log(this.Cart[i].item.itemQunatity);\n        valor[i] = this.Cart[i].item.itemQunatity;\n        soma += valor[i];\n      }\n      //console.log(soma);\n    }\n\n    this.noOfItems = this.Cart != null ? soma : null;\n    \n    this.db.list(\"/users/\" + this.af.auth.currentUser.uid + \"/address\").snapshotChanges().pipe(map(changes =>\n      changes.map(c => ({ $key: c.payload.key, ...c.payload.val() }))\n    )).subscribe((res: any) => {\n      this.addressList = res;\n      //console.log(this.addressList);\n    });\n\n    this.keyAtual = localStorage.getItem('keyAddress');\n    //console.log(this.keyAtual);\n    this.address.$key = localStorage.getItem('keyAddress');\n    //console.log(this.address.$key);\n\n    console.log(localStorage.getItem('cep'));\n    console.log(localStorage.getItem('frete'));\n    console.log(localStorage.getItem('keyAddress'));\n\n  }\n\n  //Selected Address\n  selectAddress(address = null) {\n\n    //console.log(address);\n    \n    if(address == null){\n\n      this.insertCep();\n\n    }else{\n\n      if(address.$key == localStorage.getItem('keyAddress')){\n        \n        let alert = this.alertCtrl.create({\n          title: \"Atenção!\",\n          subTitle: \"Você não pode excluir o endereço que está sendo utilizado no momento!\",\n          buttons: [\n            {\n              text: \"OK\",\n              role: 'cancel',\n              handler: data => {\n                console.log(data);\n              }\n            }\n          ]\n        });\n        alert.present();\n\n      }else{\n\n        let alert = this.alertCtrl.create({\n          title: \"Excluir!\",\n          subTitle: \"Você quer excluir esse endereço?\",\n          buttons: [\n            {\n              text: \"sim\",\n              handler: data => {\n                this.db.list(\"/users/\" + this.af.auth.currentUser.uid + \"/address\").remove(address.$key);\n                this.navCtrl.push(\"MeusEnderecosPage\");\n              }\n            }, {\n              text: \"Cancelar\",\n              role: 'cancel',\n              handler: data => {\n                console.log(data);\n              }\n            }\n          ]\n        });\n        alert.present();\n\n      }\n\n    }\n        \n  }\n\n  //Selected Address\n  selectAddress2(key, address) {\n    //console.log(address);\n    localStorage.setItem(\"cep\", address.cep);\n    localStorage.setItem(\"frete\", address.frete);\n    localStorage.setItem(\"keyAddress\", key);\n  }\n\n  insertCep() {\n\n    let profileModal = this.modalCtrl.create(GoogleMapsGeolocalizacaoPage);\n    profileModal.present();\n\n    profileModal.onDidDismiss(res => {\n      //console.log(res.data.cep);\n      //console.log(data.cep);\n      //console.log(res.data.cep);\n      //console.log(res.data);\n      if (res.data.cep != 0) {\n        this.getDataGoogleMaps(res.data.cep, res.data.bairro, res.data.endereco);\n      }\n    });\n\n  }\n\n  getDataGoogleMaps(cep, bairro, endereco) {\n    if (cep != 1) {\n      this.authService.getData('googleMaps/' + cep).then((result) => {\n\n        this.dataSetGoogleMaps = result;\n\n        /*console.log(cep);\n        console.log(bairro);\n        console.log(endereco);\n        console.log(this.dataSetGoogleMaps);\n        console.log(JSON.stringify(this.dataSetGoogleMaps));*/\n\n        if ((this.dataSetGoogleMaps != 'Digite um CEP válido') && (this.dataSetGoogleMaps != 'Não fazemos entrega nessa região!')) {\n\n          let alert = this.alertCtrl.create({\n            title: 'Entregamos nesse CEP!',\n            subTitle: '',\n            buttons: [{\n                text: 'OK',\n                handler: () => {\n                  let profileModal = this.modalCtrl.create(AddEnderecoPage, { cep: cep, frete: JSON.stringify(this.dataSetGoogleMaps), bairro: bairro, endereco: endereco });\n                  profileModal.onDidDismiss(data => {\n                    //console.log(data.data);\n                    if(data != 1){\n                      localStorage.setItem(\"cep\", data.data.cep);\n                      localStorage.setItem(\"frete\", data.data.frete);\n                      localStorage.setItem(\"keyAddress\", data.data.keyAddress);\n                      this.navCtrl.push(\"MeusEnderecosPage\");\n                    }\n                  });\n                  profileModal.present();\n                }\n              }]\n          });\n          alert.present();\n\n        } else {\n          let alert = this.alertCtrl.create({\n            title: this.dataSetGoogleMaps,\n            subTitle: '',\n            buttons: [\n              {\n                text: 'OK',\n                handler: () => {\n                  this.insertCep();\n                }\n              }\n            ]\n          });\n          alert.present();\n        }\n\n      }, (err) => {\n        console.log(err);\n      });\n    } else {\n      this.navCtrl.pop();\n    }\n\n  }\n\n  navcart() {\n    this.navCtrl.push(\"CartPage\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meus-enderecos/meus-enderecos.ts"],"sourceRoot":""}